const sqlite3 = require('sqlite3').verbose();
const db = new sqlite3.Database('./city.db');

db.serialize(() => {
    db.run("DROP TABLE IF EXISTS streets");
    db.run("DROP TABLE IF EXISTS districts");

    db.run("CREATE TABLE districts (id INTEGER PRIMARY KEY, name TEXT)");
    db.run("CREATE TABLE streets (id INTEGER PRIMARY KEY, name TEXT, district_id INTEGER, FOREIGN KEY(district_id) REFERENCES districts(id))");

    const districts = [
        [1, "Октябрьский район"],
        [2, "Первомайский район"],
        [3, "Ленинский район"],
        [4, "Свердловский район"]
    ];

    const insertDist = db.prepare("INSERT INTO districts (id, name) VALUES (?, ?)");
    districts.forEach(d => insertDist.run(d));
    insertDist.finalize();

    const streets = [
        ["улица Байтик Баатыра", 1],
        ["улица Кулатова", 1],
        ["улица Горького", 1],
        ["улица Медерова", 1],
        ["улица Жукеева-Пудовкина", 1],
        ["улица Матросова", 1],
        ["улица Бектенова", 1],
        ["улица Карасаева", 1],
        ["улица Юнусалиева", 1],
        ["улица Суеркулова", 1],
        ["улица Ахунбаева", 1],
        ["улица Малдыбаева", 1],
        ["улица Токтоналиева", 1],
        ["улица Джаманбаева", 1],
        ["переулок Гвардейский", 1],
        ["улица Элебаева", 1],
        ["улица Бакаева", 1],
        ["улица Садырбаева", 1],

        ["проспект Манаса", 2],
        ["улица Киевская", 2],
        ["бульвар Эркиндик", 2],
        ["улица Панфилова", 2],
        ["улица Логвиненко", 2],
        ["улица Фрунзе", 2],
        ["улица Абдрахманова", 2],
        ["улица Боконбаева", 2],
        ["улица Раззакова", 2],
        ["улица Орозбекова", 2],
        ["улица Тоголок Молдо", 2],
        ["улица Исанова", 2],

        ["проспект Чуй", 3],
        ["улица Московская", 3],
        ["улица Фучика", 3],
        ["улица Ошская", 3],
        ["улица Интергельпо", 3],
        ["улица Льва Толстого", 3],
        ["улица Бакаева", 3],
        ["улица Гагарина", 3],
        ["улица Термечикова", 3],
        ["проспект Дэн Сяопина", 3],
        ["улица Асаналиева", 3],
        ["улица Красная", 3],

        ["улица Курманжан Датка", 4],
        ["улица Жибек-Жолу", 4],
        ["улица Суюмбаева", 4],
        ["улица Лермонтова", 4],
        ["улица Буденного", 4],
        ["улица Ауэзова", 4],
        ["улица Осмонкула", 4],
        ["улица Гоголя", 4],
        ["улица Ибраимова", 4],
        ["улица Шопокова", 4],
        ["улица Салиевой", 4],
        ["улица Менделеева", 4]
    ];

    const insertStreet = db.prepare("INSERT INTO streets (name, district_id) VALUES (?, ?)");
    streets.forEach(s => insertStreet.run(s));
    insertStreet.finalize();

    console.log("Database initialized with extended Bishkek data");
});

db.close();